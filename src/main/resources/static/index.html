<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <title>AI Code Reviewer — Minimal UI</title>
  <style>
    body{font-family:Arial,Helvetica,sans-serif;max-width:900px;margin:2rem auto}
    textarea{width:100%;height:300px}
    .row{display:flex;gap:1rem}
    .col{flex:1}
    pre{background:#f6f8fa;padding:1rem;border-radius:6px}
  </style>
</head>
<body>
  <h1>AI Code Reviewer — Minimal UI</h1>
  <p>Paste your code below, choose language (optional) and click Review.</p>
  <div>
    <label>Author: <input id="author"/></label>
    <label style="float:right">Language: <input id="language"/></label>
  </div>
  <div style="margin-top:1rem">
    <textarea id="code" placeholder="Paste your code here..."></textarea>
  </div>
  <div style="margin-top:1rem">
    <button id="review">Review</button>
  </div>
  <h2>Result</h2>
  <pre id="result">(no result yet)</pre>

  <script>
    document.getElementById('review').addEventListener('click', async () => {
      const payload = {
        author: document.getElementById('author').value,
        language: document.getElementById('language').value,
        code: document.getElementById('code').value
      };

      const res = await fetch('/api/reviews', {
        method: 'POST',
        headers: {'Content-Type': 'application/json'},
        body: JSON.stringify(payload)
      });

      const json = await res.json();
      document.getElementById('result').textContent = JSON.stringify(json, null, 2);
    });
  </script>
</body>
</html>